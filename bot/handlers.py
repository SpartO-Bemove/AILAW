import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ neuralex-main –≤ sys.path
sys.path.append(os.path.join(os.path.dirname(__file__), '..', 'neuralex-main'))

from telegram import Update
from telegram.ext import ContextTypes

from .keyboards import main_menu, laws_menu, back_to_main_button

try:
    from neuralex_main import neuralex
    from langchain_openai import ChatOpenAI, OpenAIEmbeddings
    from langchain_community.vectorstores import Chroma
    import os
    from dotenv import load_dotenv
    
    load_dotenv()
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ neuralex
    openai_api_key = os.getenv('OPENAI_API_KEY')
    if not openai_api_key:
        raise ValueError("OPENAI_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")
    
    llm = ChatOpenAI(model='gpt-4o-mini', temperature=0.9, openai_api_key=openai_api_key)
    embeddings = OpenAIEmbeddings(openai_api_key=openai_api_key)
    vector_store = Chroma(persist_directory="chroma_db_legal_bot_part1", embedding_function=embeddings)
    
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä neuralex
    law_assistant = neuralex(llm, embeddings, vector_store)
    
except ImportError as e:
    print(f"–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ neuralex: {e}")
    law_assistant = None

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_states = {}

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user_name = update.effective_user.first_name or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
    welcome_text = f"""
üëã –ü—Ä–∏–≤–µ—Ç, {user_name}!

–Ø **Neuralex** ‚Äî –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-—é—Ä–∏—Å—Ç, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–µ.

üéØ **–ß—Ç–æ —è —É–º–µ—é:**
‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
‚Ä¢ –û–±—ä—è—Å–Ω—è—Ç—å —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–æ–≤ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º
‚Ä¢ –ü–æ–º–æ–≥–∞—Ç—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –ø—Ä–∞–≤–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö
‚Ä¢ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã –ø—Ä–∞–≤–∞

‚öñÔ∏è **–ú–æ—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –≤–∫–ª—é—á–∞–µ—Ç:**
‚Ä¢ –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—é –†–§
‚Ä¢ –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π, –£–≥–æ–ª–æ–≤–Ω—ã–π, –¢—Ä—É–¥–æ–≤–æ–π –∫–æ–¥–µ–∫—Å—ã
‚Ä¢ –°–µ–º–µ–π–Ω—ã–π, –ù–∞–ª–æ–≥–æ–≤—ã–π, –ñ–∏–ª–∏—â–Ω—ã–π –∫–æ–¥–µ–∫—Å—ã
‚Ä¢ –ö–æ–ê–ü –†–§ –∏ –¥—Ä—É–≥–∏–µ —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–Ω—ã

–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:
    """
    await update.message.reply_text(welcome_text, reply_markup=main_menu())

async def handle_user_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user_id = str(update.effective_user.id)
    user_text = update.message.text
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if user_states.get(user_id) != 'asking_question':
        await update.message.reply_text(
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ '‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å' –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞.",
            reply_markup=main_menu()
        )
        return
    
    if law_assistant is None:
        await update.message.reply_text(
            "‚ùå –ò–∑–≤–∏–Ω–∏—Ç–µ, —Å–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
            reply_markup=main_menu()
        )
        return
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
    await context.bot.send_chat_action(chat_id=update.effective_chat.id, action='typing')
    
    try:
        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç –ò–ò-—é—Ä–∏—Å—Ç–∞
        answer, _ = law_assistant.conversational(user_text, user_id)
        
        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
        formatted_answer = f"‚öñÔ∏è **–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è:**\n\n{answer}\n\n"
        formatted_answer += "‚ö†Ô∏è *–î–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–æ—Å–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä. –î–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –ø—Ä–∞–≤–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —é—Ä–∏—Å—Ç—É.*"
        
        await update.message.reply_text(
            formatted_answer,
            parse_mode='Markdown',
            reply_markup=back_to_main_button()
        )
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_states[user_id] = None
        
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞: {e}")
        await update.message.reply_text(
            "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.",
            reply_markup=main_menu()
        )
        user_states[user_id] = None

async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏"""
    query = update.callback_query
    await query.answer()
    
    user_id = str(update.effective_user.id)
    
    if query.data == 'ask':
        user_states[user_id] = 'asking_question'
        await query.edit_message_text(
            "‚ùì **–ó–∞–¥–∞–π—Ç–µ –≤–∞—à —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å**\n\n"
            "–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ. –ß–µ–º –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π –≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç–µ, "
            "—Ç–µ–º –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –∏ –ø–æ–ª–µ–∑–Ω—ã–π –æ—Ç–≤–µ—Ç —è —Å–º–æ–≥—É –¥–∞—Ç—å.\n\n"
            "üìù *–ù–∞–ø—Ä–∏–º–µ—Ä:*\n"
            "‚Ä¢ –ö–∞–∫–∏–µ –ø—Ä–∞–≤–∞ –∏–º–µ–µ—Ç —Ä–∞–±–æ—Ç–Ω–∏–∫ –ø—Ä–∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏–∏?\n"
            "‚Ä¢ –ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å —Ä–∞–∑–≤–æ–¥ —á–µ—Ä–µ–∑ –ó–ê–ì–°?\n"
            "‚Ä¢ –ö–∞–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ü–î–î?\n\n"
            "–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:",
            parse_mode='Markdown',
            reply_markup=back_to_main_button()
        )
    
    elif query.data == 'laws':
        await query.edit_message_text(
            "üìö **–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–∫–æ–Ω–æ–≤:**\n\n"
            "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –≤–∞—Å –æ–±–ª–∞—Å—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:",
            parse_mode='Markdown',
            reply_markup=laws_menu()
        )
    
    elif query.data == 'about':
        about_text = """
‚ÑπÔ∏è **–û –±–æ—Ç–µ Neuralex**

ü§ñ **–í–µ—Ä—Å–∏—è:** 1.0 (–ü–∏–ª–æ—Ç–Ω–∞—è)
üß† **–ò–ò-–º–æ–¥–µ–ª—å:** GPT-4o-mini
üìä **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞

üéØ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º—É –ø—Ä–∞–≤—É
‚Ä¢ –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–∞–∫–æ–Ω–æ–≤
‚Ä¢ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–æ–≤—ã—Ö –Ω–æ—Ä–º
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
–ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∏–ª–æ—Ç–Ω–æ–π —Ñ–∞–∑–µ. –û—Ç–≤–µ—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º–∏ –Ω–∞ 100%. –î–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —é—Ä–∏—Å—Ç–∞–º.

üîß **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞:** @your_support_bot
        """
        await query.edit_message_text(
            about_text,
            parse_mode='Markdown',
            reply_markup=back_to_main_button()
        )
    
    elif query.data == 'clear_history':
        # –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if law_assistant:
            try:
                # –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –≤ Redis
                chat_history = law_assistant.get_session_history(user_id)
                chat_history.clear()
                await query.edit_message_text(
                    "üîÑ **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –æ—á–∏—â–µ–Ω–∞**\n\n"
                    "–í–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è –æ–±—â–µ–Ω–∏—è —Å –±–æ—Ç–æ–º –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞. "
                    "–¢–µ–ø–µ—Ä—å —è –Ω–µ –±—É–¥—É –ø–æ–º–Ω–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã.",
                    parse_mode='Markdown',
                    reply_markup=back_to_main_button()
                )
            except Exception as e:
                print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∏—Å—Ç–æ—Ä–∏–∏: {e}")
                await query.edit_message_text(
                    "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∏—Å—Ç–æ—Ä–∏–∏.",
                    reply_markup=back_to_main_button()
                )
        else:
            await query.edit_message_text(
                "‚ùå –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.",
                reply_markup=back_to_main_button()
            )
    
    elif query.data.startswith('law_'):
        law_info = get_law_info(query.data)
        await query.edit_message_text(
            law_info,
            parse_mode='Markdown',
            reply_markup=back_to_main_button()
        )
    
    elif query.data == 'back_to_main':
        user_states[user_id] = None  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        user_name = update.effective_user.first_name or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
        await query.edit_message_text(
            f"üëã –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, {user_name}!\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
            reply_markup=main_menu()
        )

def get_law_info(law_code):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∑–∞–∫–æ–Ω–µ"""
    law_descriptions = {
        'law_constitution': """
‚öñÔ∏è **–ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—è –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏**

üìÖ –ü—Ä–∏–Ω—è—Ç–∞: 12 –¥–µ–∫–∞–±—Ä—è 1993 –≥–æ–¥–∞
üìã –°—Ç–∞—Ç—É—Å: –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–∫–æ–Ω –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞

üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
‚Ä¢ –û—Å–Ω–æ–≤—ã –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å—Ç—Ä–æ—è
‚Ä¢ –ü—Ä–∞–≤–∞ –∏ —Å–≤–æ–±–æ–¥—ã —á–µ–ª–æ–≤–µ–∫–∞ –∏ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞
‚Ä¢ –§–µ–¥–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
‚Ä¢ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –†–§, –§–µ–¥–µ—Ä–∞–ª—å–Ω–æ–µ –°–æ–±—Ä–∞–Ω–∏–µ, –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ
‚Ä¢ –°—É–¥–µ–±–Ω–∞—è –≤–ª–∞—Å—Ç—å –∏ –ø—Ä–æ–∫—É—Ä–∞—Ç—É—Ä–∞
‚Ä¢ –ú–µ—Å—Ç–Ω–æ–µ —Å–∞–º–æ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

üí° *–ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—è –∏–º–µ–µ—Ç –≤—ã—Å—à—É—é —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é —Å–∏–ª—É –∏ –ø—Ä—è–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –≤—Å–µ–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–§.*
        """,
        
        'law_civil': """
üèõÔ∏è **–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å –†–§**

üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç —Å: 1995 –≥–æ–¥–∞ (—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏)
üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞: 4 —á–∞—Å—Ç–∏

üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
‚Ä¢ –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è (–ª–∏—Ü–∞, —Å–¥–µ–ª–∫–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ)
‚Ä¢ –ü—Ä–∞–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –¥—Ä—É–≥–∏–µ –≤–µ—â–Ω—ã–µ –ø—Ä–∞–≤–∞
‚Ä¢ –û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–æ (–¥–æ–≥–æ–≤–æ—Ä—ã, –¥–µ–ª–∏–∫—Ç—ã)
‚Ä¢ –û—Ç–¥–µ–ª—å–Ω—ã–µ –≤–∏–¥—ã –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤
‚Ä¢ –ù–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–æ
‚Ä¢ –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ —á–∞—Å—Ç–Ω–æ–µ –ø—Ä–∞–≤–æ

üí° *–†–µ–≥—É–ª–∏—Ä—É–µ—Ç –∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –ª–∏—á–Ω—ã–µ –Ω–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è.*
        """,
        
        'law_criminal': """
‚öîÔ∏è **–£–≥–æ–ª–æ–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§**

üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç —Å: 1 —è–Ω–≤–∞—Ä—è 1997 –≥–æ–¥–∞
üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –û–±—â–∞—è –∏ –û—Å–æ–±–µ–Ω–Ω–∞—è —á–∞—Å—Ç–∏

üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
‚Ä¢ –ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ
‚Ä¢ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–∫–∞–∑–∞–Ω–∏—è
‚Ä¢ –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ—Ç —É–≥–æ–ª–æ–≤–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
‚Ä¢ –ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –ª–∏—á–Ω–æ—Å—Ç–∏
‚Ä¢ –ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤ —Å—Ñ–µ—Ä–µ —ç–∫–æ–Ω–æ–º–∏–∫–∏
‚Ä¢ –ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚Ä¢ –ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–ª–∞—Å—Ç–∏

üí° *–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –¥–µ—è–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è–º–∏ –∏ –∫–∞–∫–∏–µ –Ω–∞–∫–∞–∑–∞–Ω–∏—è –∑–∞ –Ω–∏—Ö –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã.*
        """,
        
        'law_labor': """
üíº **–¢—Ä—É–¥–æ–≤–æ–π –∫–æ–¥–µ–∫—Å –†–§**

üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç —Å: 1 —Ñ–µ–≤—Ä–∞–ª—è 2002 –≥–æ–¥–∞
üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞: 6 —á–∞—Å—Ç–µ–π, 14 —Ä–∞–∑–¥–µ–ª–æ–≤

üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
‚Ä¢ –¢—Ä—É–¥–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä
‚Ä¢ –†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –∏ –≤—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞
‚Ä¢ –û–ø–ª–∞—Ç–∞ –∏ –Ω–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä—É–¥–∞
‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏–∏ –∏ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏
‚Ä¢ –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Ç—Ä—É–¥–∞
‚Ä¢ –û—Ö—Ä–∞–Ω–∞ —Ç—Ä—É–¥–∞
‚Ä¢ –ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
‚Ä¢ –¢—Ä—É–¥–æ–≤—ã–µ —Å–ø–æ—Ä—ã

üí° *–†–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ç—Ä—É–¥–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º–∏ –∏ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è–º–∏.*
        """,
        
        'law_family': """
üë®‚Äçüë©‚Äçüëß‚Äçüë¶ **–°–µ–º–µ–π–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§**

üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç —Å: 1 –º–∞—Ä—Ç–∞ 1996 –≥–æ–¥–∞
üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞: 8 —Ä–∞–∑–¥–µ–ª–æ–≤

üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
‚Ä¢ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –±—Ä–∞–∫–∞
‚Ä¢ –ü—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ —Å—É–ø—Ä—É–≥–æ–≤
‚Ä¢ –ü—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏ –¥–µ—Ç–µ–π
‚Ä¢ –ê–ª–∏–º–µ–Ω—Ç–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
‚Ä¢ –§–æ—Ä–º—ã –≤–æ—Å–ø–∏—Ç–∞–Ω–∏—è –¥–µ—Ç–µ–π, –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –±–µ–∑ –ø–æ–ø–µ—á–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π
‚Ä¢ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–µ–º–µ–π–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∫ —Å–µ–º–µ–π–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º —Å —É—á–∞—Å—Ç–∏–µ–º –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω

üí° *–†–µ–≥—É–ª–∏—Ä—É–µ—Ç —Å–µ–º–µ–π–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è: –±—Ä–∞–∫, —Ä–æ–¥–∏—Ç–µ–ª—å—Å—Ç–≤–æ, –æ–ø–µ–∫–∞, —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ.*
        """,
        
        'law_tax': """
üí∞ **–ù–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–¥–µ–∫—Å –†–§**

üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç —Å: 1999 –≥–æ–¥–∞ (1 —á–∞—Å—Ç—å), 2001 –≥–æ–¥–∞ (2 —á–∞—Å—Ç—å)
üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞: 2 —á–∞—Å—Ç–∏

üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
**–ß–∞—Å—Ç—å 1:** –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è
‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ª–æ–≥–æ–≤ –∏ —Å–±–æ—Ä–æ–≤
‚Ä¢ –ù–∞–ª–æ–≥–æ–ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∏ –∏ –Ω–∞–ª–æ–≥–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã
‚Ä¢ –ù–∞–ª–æ–≥–æ–≤—ã–µ –æ—Ä–≥–∞–Ω—ã
‚Ä¢ –ù–∞–ª–æ–≥–æ–≤—ã–µ –ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å

**–ß–∞—Å—Ç—å 2:** –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–ª–æ–≥–∏
‚Ä¢ –ù–î–°, –Ω–∞–ª–æ–≥ –Ω–∞ –ø—Ä–∏–±—ã–ª—å, –ù–î–§–õ
‚Ä¢ –ê–∫—Ü–∏–∑—ã, –Ω–∞–ª–æ–≥ –Ω–∞ –∏–º—É—â–µ—Å—Ç–≤–æ
‚Ä¢ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –∏ –∑–µ–º–µ–ª—å–Ω—ã–π –Ω–∞–ª–æ–≥–∏

üí° *–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –Ω–∞–ª–æ–≥–æ–≤ –∏ —Å–±–æ—Ä–æ–≤ –≤ –†–§.*
        """,
        
        'law_housing': """
üè† **–ñ–∏–ª–∏—â–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§**

üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç —Å: 1 –º–∞—Ä—Ç–∞ 2005 –≥–æ–¥–∞
üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞: 8 —Ä–∞–∑–¥–µ–ª–æ–≤

üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
‚Ä¢ –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è –∂–∏–ª–∏—â–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
‚Ä¢ –ü—Ä–∞–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –¥—Ä—É–≥–∏–µ –≤–µ—â–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∂–∏–ª—ã–µ –ø–æ–º–µ—â–µ–Ω–∏—è
‚Ä¢ –ñ–∏–ª—ã–µ –ø–æ–º–µ—â–µ–Ω–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚Ä¢ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∂–∏–ª–∏—â–Ω—ã–π —Ñ–æ–Ω–¥
‚Ä¢ –ñ–∏–ª–∏—â–Ω—ã–µ –∏ –∂–∏–ª–∏—â–Ω–æ-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤—ã
‚Ä¢ –¢–æ–≤–∞—Ä–∏—â–µ—Å—Ç–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∂–∏–ª—å—è
‚Ä¢ –ü–ª–∞—Ç–∞ –∑–∞ –∂–∏–ª–æ–µ –ø–æ–º–µ—â–µ–Ω–∏–µ –∏ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏
‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–≥–æ–∫–≤–∞—Ä—Ç–∏—Ä–Ω—ã–º–∏ –¥–æ–º–∞–º–∏

üí° *–†–µ–≥—É–ª–∏—Ä—É–µ—Ç –∂–∏–ª–∏—â–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –ø—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∏ –Ω–∞–Ω–∏–º–∞—Ç–µ–ª–µ–π –∂–∏–ª—å—è.*
        """
    }
    
    return law_descriptions.get(law_code, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∞–Ω–Ω–æ–º –∑–∞–∫–æ–Ω–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.")